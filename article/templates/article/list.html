{% extends "article/base.html" %}
{% load custom_markdown %}

{% block content %}
<div class="posts">
    {% if error_message %} <h2 class="post-title">{{ error_message }}</h2> {% endif %}
    {% for article in article_list %}
        <section class="post">
            <header class="post-header">
                <h2 class="post-title">
                    <a href="{% url "blog:detail" pk=article.pk %}">
                        {{ article.title }}
                    </a>
                </h2>
                <p class="post-meta">Time:
                    <a class="post-author" href="#">{{ article.last_modified_time|date:"Y /m /d" }}</a>
                    <a class="post-category post-category-js" href="{% url "blog:search_tag" tag=article.category %}">{{ article.category|title }}</a>
                </p>
            </header>
            <div class="post-description">
                <p>{{ article.content|custom_markdown|truncatechars_html:10 }}</p>
            </div>
        </section>
    {% endfor %}

    <div>
        <ul class="pager">
            {% if article_list.has_previous %}
            <li><a href="?page={{ article_list.previous_page_number }}">上一页</a></li>
            {% endif %}
            {% if article_list.has_next %}
            <li><a href="?page={{ article_list.next_page_number }}">下一页</a></li>
            {% endif %}
        </ul>
    </div>
</div>
{% endblock %}
